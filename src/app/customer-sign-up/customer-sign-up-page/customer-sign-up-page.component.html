<div>
  <app-service-header></app-service-header>


<div class="container">
    <div class="row" *ngIf="!signupComplete else message">
      <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">
        <h3>Sign Up</h3>
        <form [formGroup]="signupForm" (ngSubmit)="signup()">
          <div id="user-data">
            <div class="form-group">
              <label for="firstname">First Name
                  <span class="required">*</span>
              </label>
              <input type="text" placeholder="Enter First Name" id="firstname" class="form-control" formControlName="firstName">
              <p class="error-message" *ngIf="signupForm.get('firstName').touched && signupForm.get('firstName').errors && signupForm.get('firstName').errors.required">
                * Please enter First Name.
              </p>
            </div>
            <div class="form-group">
              <label for="lastname">Last Name
                  <span class="required">*</span>
              </label>
              <input type="text" placeholder="Enter Last Name" id="lastname" class="form-control" formControlName="lastName">
              <p class="error-message" *ngIf="signupForm.get('lastName').touched && signupForm.get('lastName').errors && signupForm.get('lastName').errors.required">
                * Please enter Last Name.
              </p>
            </div>
            <div class="form-group">
              <label for="email">Email Address
                  <span class="required">*</span>
              </label>
              <input type="email" placeholder="Enter Email" id="email" class="form-control" formControlName="email">
              <p class="error-message" *ngIf="signupForm.get('email').touched && signupForm.get('email').errors && signupForm.get('email').errors.required">
                * Please enter Email Address.
              </p>
              <p class="error-message" *ngIf="signupForm.get('email').touched && signupForm.get('email').errors && signupForm.get('email').errors.email">
                * Please enter a valid Email Address.
              </p>
            </div>
            
            <div class="form-group">
              <label for="phone">Phone Number
                  <span class="required">*</span>
              </label>
              <div class="phone-wrapper">
                <input type="tel"
                  placeholder="Enter Phone Number" id="phone" class="form-control" formControlName="phone">
                <span class="country-code">+65</span>
              </div>
              <p class="error-message" *ngIf="signupForm.get('phone').touched && signupForm.get('phone').errors && signupForm.get('phone').errors.required">
                * Please enter Phone Number.
              </p>
              <p class="error-message" *ngIf="signupForm.get('phone').touched && signupForm.get('phone').errors && signupForm.get('phone').errors.pattern">
                * Please enter a valid Phone Number.
              </p>
              <p class="error-message" *ngIf="signupForm.get('phone').touched && signupForm.get('phone').errors && 
                (signupForm.get('phone').errors.maxlength || signupForm.get('phone').errors.minlength)">
                * Phone number must be of 8 digits.
              </p>
            </div>

            <div class="form-group">
              <label for="password">Password
                  <span class="required">*</span>
              </label>
              <input type="password" placeholder="Enter Password" id="password" class="form-control" formControlName="password">
              <p class="error-message" *ngIf="signupForm.get('password').touched && signupForm.get('password').errors && signupForm.get('password').errors.required">
                * Please enter Password.
              </p>
            </div>
            <div class="form-group">
              <label for="confirmpassword">Confirm Password
                  <span class="required">*</span>
              </label>
              <input type="password" placeholder="Confirm Password" id="confirmpassword" class="form-control" formControlName="confirmPassword">
              <p class="error-message" *ngIf="signupForm.get('confirmPassword').touched && signupForm.get('confirmPassword').errors && signupForm.get('confirmPassword').errors.required">
                * Please enter Confirm Password.
              </p>
            </div>

            <div class="form-group upload-container row">
              <div class="col-sm-auto">
                <div class="row">
                  <label for="profile-picture">Profile Picture
                    <span class="required">*</span>
                  </label>
                </div>

                <div class="upload-image">
                  <i class="material-icons" (click)="fileUpload.click()">photo_camera</i>
                  <p class="upload-label">Upload Photo</p>
                  <input type="file" #fileUpload (change)="onImageUpload($event)">
                </div>
              </div>
            </div>
        
            <div class="row image-preview-container" *ngIf="isImageUploaded">
              <div class="image-preview">
                <img [src]="this.imagePreview" [alt]="" >
              </div>
            </div>

            <div>
                <input type="checkbox" name="mailing" value="mail"> I would like to receive promotions, tips and announcements via email<br>
            </div>
          </div>
          <br>
          <div style="text-align: center;">
            <button class="btn btn-primary" [disabled]="signupForm.invalid" type="submit">Sign Up</button>
          </div>
        </form>
      </div>
    </div>
    <ng-template #message>
      <p class="signup-complete">{{ signupCompleteMessage }}</p>
      <p class="login-link"><a routerLink="/customer-login" class="link">Click here to Login</a></p>
    </ng-template>
    
  </div>
</div>
